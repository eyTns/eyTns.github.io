# Tiny Interactive — 결정사항 목록

BOI 2012 "Tiny" 문제의 인터랙티브 플레이 도구 구현에서 내린 모든 결정사항.

---

## 네이밍

| 항목 | 결정 | 근거 |
|------|------|------|
| 프로젝트명 | `Tiny` | 원 문제명 그대로. "Tetris" 붙이지 않음 |
| 디렉토리명 | `tiny/` | 프로젝트명과 동일, 소문자 |
| JSX 파일명 | `tiny_interactive.jsx` | mines 프로젝트의 `mines_interactive.jsx` 패턴 따름 |
| React 컴포넌트명 | `TinyGame` | 문제명 + 기능 설명 |
| HTML title | `Tiny` | 브라우저 탭에 표시 |
| 헤더 텍스트 | `Tiny Interactive` | 문제명 + 도구 성격 |
| 저장 파일 타입 식별자 | `tiny_save` | JSON 저장 시 `_type` 필드 |
| 출력 파일명 | `tiny_output.txt` | 결과 내보내기 시 기본 파일명 |
| 진행 저장 파일명 | `tiny_progress.json` | 진행 저장 시 기본 파일명 |

## 기술 스택

| 항목 | 결정 | 근거 |
|------|------|------|
| 프레임워크 | React 18 (CDN) | mines 프로젝트와 동일 패턴. 빌드 시스템 없음 |
| JSX 컴파일 | Babel standalone (CDN) | mines 프로젝트와 동일 |
| 렌더링 | Canvas 2D API | 9x9 그리드 + 고스트 피스 + 줄 클리어 애니메이션에 적합 |
| 상태 관리 | React useState/useCallback | 외부 라이브러리 없이 React 내장 훅만 사용 |
| 스타일링 | 인라인 스타일 객체 | mines 프로젝트 패턴. CSS 파일 별도 없음 |
| CDN 소스 | unpkg.com | mines 프로젝트와 동일 |

## 피스 정의

| 항목 | 결정 | 근거 |
|------|------|------|
| 피스 데이터 구조 | `{cells, w, h, xRow, xCol}` | cells는 바운딩 박스 내 [row, col] 배열, w/h는 바운딩 박스 크기, xRow/xCol은 x 마커 위치 |
| 좌표계 | [row_offset, col_offset] (행 우선) | Canvas 렌더링과 2D 배열 인덱싱에 자연스러움 |
| x 마커 위치 표현 | xRow/xCol 별도 필드 | 일부 피스(2,4,6,7,8)에서 x가 바운딩 박스 [0,0]이 아님 |
| 열 계산 공식 | `c0 = col - 1 - xCol` | 1-indexed 열 → 0-indexed 배열, xCol 오프셋 보정 |
| 피스 번호 1-9 | BOI 2012 문제 이미지 기준 | 문제 원본 준수 |

## 게임 로직

| 항목 | 결정 | 근거 |
|------|------|------|
| 그리드 크기 | 9x9 (GRID_W=9, GRID_H=9) | 문제 명세 |
| 그리드 표현 | `number[][]` (0=빈칸, 1-9=피스 타입) | 셀에 피스 타입 저장하여 색상 구분 |
| 착지 알고리즘 | 위→아래 순차 탐색, 첫 충돌 시 break | 연속 낙하 시뮬레이션. 장애물 "통과" 방지 |
| 줄 클리어 | `grid.filter()` + 빈 행 앞에 추가 | 꽉 찬 행 제거 후 위에서 빈 행 채움 |
| 게임 오버 조건 | 유효하지 않은 열 OR 착지 불가 | 문제 명세대로 두 조건 분리 처리 |
| 게임 오버 시 동작 | gameOver 플래그 + 사유 메시지 | 되돌리기로 복구 가능 |
| 피스 순서 소진 시 | isComplete 플래그 | 게임 오버와 구분 |

## 입력/출력

| 항목 | 결정 | 근거 |
|------|------|------|
| 입력 형식 | BOI 형식 (첫 줄 N, 이후 N줄 피스 번호) + 공백/콤마 구분 폴백 | 문제 원본 형식 우선, 유연한 파싱 제공 |
| N 자동 감지 | 첫 숫자가 나머지 줄 수와 같으면 N으로 취급 | 의도하지 않은 피스 번호 해석 방지 |
| 진행 저장 형식 | JSON (`_type: 'tiny_save'`) | 전체 상태 복원 가능. mines 프로젝트 패턴 |
| 결과 출력 형식 | 줄당 하나의 열 번호 | BOI 출력 형식 |
| 파일 확장자 필터 | `.in,.txt,.json,*/*` | BOI 입력 파일(.i01 등) + 텍스트 + JSON 저장 |

## UI/UX

| 항목 | 결정 | 근거 |
|------|------|------|
| 셀 크기 | 48px (CS=48) | 9x9=432px. 클릭 타겟으로 충분하고 화면에 잘 맞음 |
| HiDPI 지원 | `devicePixelRatio` 기반 캔버스 스케일링 | mines 프로젝트 패턴 |
| 고스트 피스 | 마우스 호버 시 착지 위치에 반투명(0.35) 표시 | 배치 결과 미리보기 |
| 열 하이라이트 | 호버된 열에 연한 보라색 오버레이 | 선택 대상 시각화 |
| 열 번호 표시 | 캔버스 하단 24px 영역에 1-9 표시 | 그리드와 열 번호 명확히 연결 |
| 열 선택 버튼 | 3색 구분: 회색(비유효), 파랑(착지 가능), 빨강(착지 불가) | 유효성 + 착지 가능성 즉시 파악 |
| 줄 클리어 효과 | 200ms 노란색 플래시 | 짧고 명확한 피드백 |
| 셀 내 숫자 | 피스 타입 번호 표시 (흰색 반투명) | 어떤 피스인지 식별 |
| 현재 피스 표시 | 사이드패널 상단, PieceDisplay + 타입 번호 | 즉시 확인 가능 |
| 다음 피스 | 최대 5개 미리보기 | 계획 수립에 충분 |
| 선택 기록 | 스크롤 가능 영역, 피스별 색상 | 진행 상황 추적 |
| 조각 참조 차트 | 하단 고정, 현재 피스 하이라이트 | 항상 피스 모양 확인 가능 |
| 빈 상태 | 퍼즐 이모지 + 안내 문구, 점선 테두리 | mines 프로젝트 패턴 |
| 언어 | 한국어 (UI 텍스트) | 기존 프로젝트와 일관 |

## 이벤트 처리

| 항목 | 결정 | 근거 |
|------|------|------|
| 키보드 1-9 | 열 선택 | 가장 직관적인 매핑 |
| Ctrl+Z | 되돌리기 | 표준 단축키 |
| 캔버스 클릭 | 클릭한 열에 피스 배치 | 마우스 사용자용 |
| 캔버스 호버 | 고스트 피스 표시 | 배치 미리보기 |
| 캔버스 밖 이동 | 고스트/하이라이트 제거 | 깔끔한 상태 |

## 상태 관리

| 항목 | 결정 | 근거 |
|------|------|------|
| 되돌리기 최대 수 | 500 | 대부분의 게임(N=1000)에서 충분 |
| 히스토리 항목 | 전체 스냅샷 (grid, curIdx, colChoices, linesCleared, gameOver, gameOverReason) | 완전한 상태 복원 |
| 히스토리 저장 방식 | 배열에 push, undo시 pop | 단순한 undo 스택 |
| gameOver 되돌리기 | 가능 (히스토리에 gameOver 포함) | 실수로 잘못된 열 선택 시 복구 |

## 피스 색상

| 피스 | 색상 | 테두리 |
|------|------|--------|
| 0 (빈칸) | `#f1f5f9` (slate-50) | `#e2e8f0` (slate-200) |
| 1 | `#fbbf24` (amber-400) | `#f59e0b` (amber-500) |
| 2 | `#fb923c` (orange-400) | `#f97316` (orange-500) |
| 3 | `#f87171` (red-400) | `#ef4444` (red-500) |
| 4 | `#f472b6` (pink-400) | `#ec4899` (pink-500) |
| 5 | `#c084fc` (purple-400) | `#a855f7` (purple-500) |
| 6 | `#818cf8` (indigo-400) | `#6366f1` (indigo-500) |
| 7 | `#60a5fa` (blue-400) | `#3b82f6` (blue-500) |
| 8 | `#22d3ee` (cyan-400) | `#06b6d4` (cyan-500) |
| 9 | `#34d399` (emerald-400) | `#10b981` (emerald-500) |

색상 선택 기준: Tailwind CSS 400/500 팔레트에서 9개 피스가 서로 구분 가능하도록 분산 선택.

## 내장 예제

| 이름 | 내용 | 목적 |
|------|------|------|
| Demo (20) | 문제 본문의 20피스 예제 시퀀스 | 문제와 동일한 상황 재현 |
| Line Clear | 12피스 (가로 트로미노 + 도미노 + 단일) | 줄 클리어 기능 테스트 |

## 레이아웃

| 항목 | 결정 | 근거 |
|------|------|------|
| 최대 너비 | 1000px | 캔버스(432px) + 사이드패널이 나란히 들어갈 여유 |
| 배치 | flexbox wrap | 좁은 화면에서 자동 세로 배치 |
| 사이드패널 최소 너비 | 200px | 열 버튼 9개가 한 줄에 들어갈 크기 |

## 파일 구조

| 파일 | 역할 |
|------|------|
| `tiny/index.html` | HTML 셸. React/Babel CDN 로드, JSX 마운트 |
| `tiny/tiny_interactive.jsx` | 단일 파일에 모든 로직 (순수 함수 + React 컴포넌트) |
| `tiny/DECISIONS.md` | 본 문서 |

단일 JSX 파일 결정 근거: mines 프로젝트 패턴 준수. 빌드 시스템 없이 Babel standalone으로 직접 컴파일. 코드 규모(~650줄)가 분할이 불필요한 수준.
